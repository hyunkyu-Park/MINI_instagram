<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link href="/css/style.css" rel="stylesheet" />
    <title>minista</title>
  </head>

  <body>
    <div class="post_profile">
      <a href="/">
        <img src="{{ url_for('static', filename='images/logo.png') }}" alt="Logo" width="48">
      </a>
      <p>minista</p>
    </div>

    <div class="top_right">
      <a href="/explore/">explore</a> |
      <a href="/users/{{logname}}/">{{logname}}</a>
    </div>

    <div class="contents">
      <h1>{{username}}</h1>
      <div class="user_info">
        {% if logname_follows_username == true %}
        <p>following</p>
          <!-- DO NOT CHANGE THIS (aside from where we say 'FIXME') -->
          <form action="/following/?target=/users/{{username}}" method="post" enctype="multipart/form-data">
            <input type="submit" name="unfollow" value="unfollow"/>
            <input type="hidden" name="username" value="{{username}}"/>
            <input type="hidden" name="operation" value="unfollow"/>
          </form>
        {% elif logname_follows_username == false and logname!=username%}
        <p>not following</p>
          <!-- DO NOT CHANGE THIS (aside from where we say 'FIXME') -->
          <form action="/following/?target=/users/{{username}}/" method="post" enctype="multipart/form-data">
            <input type="submit" name="follow" value="follow"/>
            <input type="hidden" name="username" value="{{username}}"/>
            <input type="hidden" name="operation" value="follow"/>
          </form>
        {% elif logname == username %}
        <a href="/accounts/edit/">Edit profile</a>
          <!-- DO NOT CHANGE THIS (aside from where we say 'FIXME') -->
          <form action="/accounts/logout/" method="post" enctype="multipart/form-data">
            <input type="submit" name="logout" value="Logout"/>
          </form>
        {% endif %} 
        {% if total_posts == 1 %}
        <p>{{total_posts}} post</p>
        {% else %}
        <p>{{total_posts}} posts</p>
        {% endif %}

        <a href="/users/{{username}}/followers/">
          {% if followers == 1 %}
          <p>{{followers}} follower</p>
          {% else %}
          <p>{{followers}} followers</p>
          {% endif %}
        </a>

        <a href="/users/{{username}}/following/">
          <p>{{following}} following</p>
        </a>
      </div>
      <p>{{full_name}}</p>
      {% if logname == username %}
        <!-- DO NOT CHANGE THIS (aside from where we say 'FIXME') -->
        <form action="/posts/?target=/users/{{username}}/" method="post" enctype="multipart/form-data">
          <input type="file" name="file" accept="image/*" required/>
          <input type="submit" name="create_post" value="upload new post"/>
          <input type="hidden" name="operation" value="create"/>
        </form>
      {% endif %}
      <div>
        {% if total_posts != 0 %}
          {% for post in posts %}
          <a href="/posts/{{post.postid}}/">
            <img src="{{ url_for('upload_file', filename = post.filename) }}" alt="user_post1" width="264" />
          </a>
          {% endfor %}
        {% else %}
          <p>No posts yet.</p>
        {% endif %}
      </div>
    </div>
  </body>
</html>
